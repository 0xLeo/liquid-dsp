% ------------------------------------------------------------------
%
%   TITLE: LIQUID documentation
% AUTHORS: Joseph D. Gaeddert et al.
% CREATED: February 7, 2009
% REVISED: 
%     URL: http://computing.ece.vt.edu/~jgaeddert/
%          https://ganymede.ece.vt.edu/trac/liquid/
%
% ------------------------------------------------------------------
 
\documentclass[11pt,twoside]{report}
% ------------------- DOCUMENT VARIABLES -------------------
\setlength{\textwidth}{6.5in}
\setlength{\textheight}{8.5in}
\setlength{\evensidemargin}{0in}
\setlength{\oddsidemargin}{0in}
\setlength{\topmargin}{0in}
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.1in}

% ------------------- BIBLIOGRAPHY STYLE -------------------
\usepackage{natbib}
%\bibliographystyle{plain} % note the change here
\bibliographystyle{IEEEtran}
\bibpunct{[}{]}{,}{n}{}{;}  % define bibliography punctuation
% The six mandatory arguments for \bibpunct are:
%   1. opening bracket: '(', '[', '{', or '<'
%   2. closing bracket: ')', ']', '}', or '>'
%   3. separator between multiple citations: ';' or ','
%   4. citation style: 'n' for numerical style, 's' for numerical superscript
%      style, or 'a' for author year style
%   5. punctuation between the author names and the year
%   6. punctuation between years or numbers when common author lists are suppressed: ',' or ';' 

% ------------------- GRAPHICS PACKAGES -------------------
%\usepackage{epsf}
%\usepackage{graphicx}
\ifx\pdfoutput\undefined
\usepackage{graphicx}
\else
\usepackage[pdftex]{graphicx}
\fi
\usepackage{epsfig}
\usepackage{epstopdf}
\usepackage{colortbl}
\usepackage{color}

%\usepackage{tabularx}
\usepackage{ctable} % \toprule, \midrule, \bottomrule
\setlength{\heavyrulewidth}{0.1em} % modify thickness of \toprule, \bottomrule
\newcommand{\otoprule}{\midrule[\heavyrulewidth]}
\usepackage{subfigure}
\usepackage{multirow} % for tables
%\usepackage{fancyhdr}
\usepackage{amsmath}
\usepackage{listings}
\usepackage{fancyvrb}
\usepackage{acronym}

% tabular: \hline (thin) \hline\hline (thick)
% from: http://www.faqs.org/faqs/tex-faq/ (see #44)
\setlength{\doublerulesep}{\arrayrulewidth}

%--------- NEW COMMANDS -------------------
\newcommand{\NA}{\scriptsize{NA}}
\newcommand{\E}{\scriptsize{E}}
\newcommand{\tRMS}{\ensuremath{\tau_{rms}}}
\newcommand{\tmED}{\ensuremath{\bar{\tau}}}
\newcommand{\Np}{\ensuremath{N_p}}
\newcommand{\ua}{\ensuremath{\uparrow}}
\newcommand{\da}{\ensuremath{\downarrow}}
\newcommand{\sinc}{\textup{sinc}}
\newcommand{\etal}{{\it et al.}}
\newcommand{\wavt}{W@VT}
\renewcommand{\vec}[1]{\boldsymbol{#1}}
\newcommand{\ciren}{C{\sc iren}}
\newcommand{\ord}{\mathcal{O}}
\newcommand{\liquid}{{\it liquid}}
\newcommand{\liquidfpm}{{\it liquid-fpm}}

%--------- CAPTION OPTIONS -------------------
\usepackage[small,bf]{caption}
\setcaptionwidth{15cm}
\setlength{\belowcaptionskip}{0.5cm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%             MAIN DOCUMENT
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

% ------------------- DEFINE LISTINGS -------------------
\input{highlight.sty}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%             TITLE PAGE
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\thispagestyle{empty}
\pagenumbering{roman}
\begin{center}

{\huge\it liquid} \\
Software-defined radio digital signal processing library

\vfill

Joseph D. Gaeddert

\vfill

\today \\
Blacksburg, Virginia

\vfill

{\it Keywords:}
polyphase filterbanks,
OFDM/OQAM,
power consumption,
cognitive radio,
software-defined radio,
dynamic spectrum access
\\

\end{center}

\pagebreak
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%             TABLE OF CONTENTS
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tableofcontents
\pagebreak

%\listoffigures
%\pagebreak

%\listoftables
%\pagebreak

\section*{List of Abbreviations}
\begin{acronym}
  \acro{3G}{$3^{rd}$ generation}
  \acro{API}{application program interface}
  \acro{AWGN}{additive white Gauss noise}
  \acro{BER}{bit error rate}
  \acro{CE}{cognitive engine}
  \acro{CIREN}{cognitively intrepid radio emergency network}
  \acro{CPU}{central processing unit}
  \acro{CR}{cognitive radio}
  \acro{DSA}{dynamic spectrum access}
  \acro{DSP}{digital signal processing}
  \acro{EQ}{equalizer}
  \acro{FEC}{forward error correction}
  \acro{FIR}{finite impulse response}
  \acro{FRS}{family radio service}
  \acro{GPP}{general purpose processor}
  \acro{OFDM}{orthogonal frequency division multiplexing}
  \acro{OQAM}{offset quadrature amplitude modulation}
  \acro{QAM}{quadrature amplitude modulation}
  \acro{QoS}{quality of service}
  \acro{PSK}{phase-shift keying}
  \acro{PTP}{point-to-point}
  \acro{SDR}{software-defined radio}
  \acro{SNR}{signal-to-noise ratio}
  \acro{VB}{voice broadcast}
  \acro{VLSI}{very large scale integration}
  \acro{WCDMA}{wideband code divisional multiple access}
\end{acronym}

\pagenumbering{arabic}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%             SECTIONS
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% modem, filter, etc.
\section{Introduction}
Key points
\begin{itemize}
\item open-source software-defined radio DSP algorithms
\item minimal dependence on external libraries
\item portable to embedded platforms
\item flexible configuration
\item targets cognitive radios and enabling technologies through
      flexible algorithmic development
\end{itemize}

\subsection{Features}
\begin{itemize}
\item automatic test scripts for validation and accuracy
\item benchmark tool for estimating computational speed on your machine
\end{itemize}


\section{Quick Start Guide}
To build:
\begin{verbatim}
cd /path/to/liquid/
./reconf
./configure
make
sudo make install
\end{verbatim}
You may also want to build and run the optional validation program via
\begin{verbatim}
make check
\end{verbatim}
and the benchmarking tool,
\begin{verbatim}
make bench
\end{verbatim}

\section{Tutorial}
Most of {\it liquid}'s signal processing elements are C structures which
retain the object's parameters, state, and other useful information.
The naming convention is
{\tt basename\_xxxt\_method} where
{\tt basename} is the base object name (e.g. {\tt interp}),
{\tt xxxt} is the type definition, and
{\tt method} is the object method.
The type definition describes respective output, internal, and input type.
Types are usually {\tt f} to denote standard 32-bit {\it floating point}
precision values and can either be represented as {\tt r} (real) or {\tt c}
(complex).
For example, a {\tt dotprod} (vector dot product) object with complex input
and output types but real internal coefficients operating on 32-bit
floating-point precision values is {\tt dotprod\_crcf}.

Most objects have at least four standard methods:
{\tt create()},
{\tt destroy()},
{\tt print()},
and
{\tt execute()}.
Certain object also implement a {\tt recreate()} method which operates similar
to that of {\tt realloc()} in C.
A few points to note:
\begin{enumerate}
\item While the objects do retain internal memory, they operate on external
arrays defined by the user. That is... It is strictly up to the user to manage
his/her own memory.
\item ...
\end{enumerate}

\section{Learning by example}
The {\tt examples/} subdirectory includes numerous examples for nearly all the
signal processing components.

\section{Sandbox}

\subsection{Why C?}
A commonly asked question is ``why C and not C++?''
The answer is simple: {\em portability}.
Our aim is to provide a lightweight DSP library for software-defined radio
that does not rely on a myriad of dependencies.
While C++ is a fine language for many purposes (and theoretically runs just as
fast as C), it is not as portable to embedded platforms as C.
Furthermore, the majority of functions simply perform complex operations on a
data sequence and do not require a high-level object-oriented programming
interface.
This we will leave to framework developers and interface builders.

\subsection{Data Types}
The majority of signal processing for SDR is performed at complex baseband.
Complex numbers are handled in \liquid\ by defining data type
{\tt liquid\_float\_complex} which is binary compatible with the standard
C math type {\tt float complex} and C++ type {\tt std::complex<float>}.

Fixed-point data types are defined in the \liquidfpm\ library (see XXX).

\subsection{Building/Linking with C++}
Although \liquid\ is written in C, it can be seamlessly compiled and linked
with C++ source files.
Here is an example:
\input{listings/nco.c++.tex}

\section{History}
{\em liquid} was created by J. Gaeddert out of necessity to perform complex
digital signal processing algorithms on embedded devices
without relying on dealing
with proprietary and otherwise cumbersome frameworks.
This was a critical step in his PhD thesis to adapt DSP algorithms in
cognitive dynamic-spectrum radios to optimally manage finite radio resources.
Was he successful?
Put it this way: at the time this document was written he still has not
graduated.\footnote{Come back in a year and ask again... {\em sigh}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%             Modules
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Modules}
\label{ch:modules}


\input{sections/agc}
\input{sections/ann}
\input{sections/audio}
\input{sections/buffer}
\input{sections/channel}
\input{sections/dotprod}
\input{sections/fec}
\input{sections/fft}
\input{sections/equalization}
%\section{estimation}
%parametric estimation: frequency offset, timing offset, fading...
\input{sections/filter}
\input{sections/interleaver}
\input{sections/math}
\input{sections/matrix}
\input{sections/modem}
\input{sections/multicarrier}
\input{sections/nco}
\input{sections/optim}
\input{sections/quantization}
\input{sections/random}
\input{sections/sequence}
\input{sections/utility}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%             Installation
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Installation}
\label{ch:installation}
The basic installation is as follows:
\begin{verbatim}
    $ ./reconf
    $ ./configure
    $ make
    # make install
\end{verbatim}
The additional makefile targets are listed here.

\section{Building \& Dependencies}
\label{ch:installation:building}
Requirements:
\begin{itemize}
\item {\tt gcc}, the GNU compiler collection
\item {\tt libc}, the standard C library
\item {\tt libm}, the standard math library (eventually will be phased out to
optional)
\end{itemize}

\liquid\ was designed to be portable, and in doing so requires minimal dependencies to
build and run.
%Several well-known DSP packages (such as {\tt fftw} [cite] and {\it libfec} [cite])...
The project, however, will take advantage of other libraries if they are installed on the
target machine.
These optional packages are:
\begin{itemize}
\item {\tt fftw3}
\item {\tt libfec}
\item {\tt liquid-fpm} (liquid fixed-point math library)
\end{itemize}
The build system checks to see if they are installed during the {\tt configure} process
and will generate an appropriate {\tt config.h} if they are.

\subsection{Source code organization}
In order to keep the project relatively organized, the source code is broken
up into separate ``modules'' under the top {\tt src/} directory.

\section{Targets}
\label{ch:installation:targets}

\subsubsection{Modules}
Each module consists of a top-level included makefile, a {\tt README}, the
library source files, a set of test scripts, and a set of benchmarks.

\subsubsection{Examples ({\tt make examples})}
All examples are built as stand-alone programs not build by the target
{\tt all} by default.
All examples can be built by invoking {\tt make examples}, or a specific
example can be build by invoking e.g. {\tt make examples/modem\_example}.

\subsection{Autotests ({\tt make check})}
\label{ch:installation:targets:autotests}
Source code validation is a critical step in any software library,
particularly for verifying the portability of code to different processors and
platforms.
Packaged with \liquid\ are a number of automatic test scripts to validate the
correctness of the source code.
The test scripts are located under each module's {\tt tests} directory and
take the form of a C header file.
The python script {\tt autotest\_gen.py} parses these header files looking for
the key ``{\tt void autotest\_}'' which corresponds to a specific test.
%Each test that is found is appended to a list
The python script generates the header file {\tt autotest\_include.h} which
includes all the modules' test headers as well as several organizing
structures for keeping track of which tests have passed or failed.
The result is an executable file, {\tt xautotest}, which can be run to
validate the functional correctess of \liquid\ on your target platform.

\subsubsection{Macros}
Each module contains a number of autotest scripts which using pre-processor
macros for asserting the functional correctness of the souce code.

\paragraph{{\tt CONTEND\_EQUALITY}$(x,y)$} asserts that $x==y$ and fails if
false.
\paragraph{{\tt CONTEND\_INEQUALITY}$(x,y)$} asserts that $x$ differs from
$y$.
\paragraph{{\tt CONTEND\_GREATER\_THAN}$(x,y)$} asserts that $x>y$.
\paragraph{{\tt CONTEND\_LESS\_THAN}$(x,y)$} asserts that $x<y$.
\paragraph{{\tt CONTEND\_DELTA}$(x,y,\Delta)$} asserts thaat $|x-y|<\Delta$
\paragraph{{\tt CONTEND\_EXPRESSION}$(expr)$} asserts that some expression is
true.
\paragraph{{\tt CONTEND\_SAME\_DATA}$(ptrA,ptrB,n)$} asserts that each of $n$
byte values in the arrays referenced by $ptrA$ and $ptrB$ are equal.
\paragraph{{\tt AUTOTEST\_PASS}$()$} passes unconditionally.
\paragraph{{\tt AUTOTEST\_FAIL}$(string)$} prints $string$ and fails
unconditionaly.
\paragraph{{\tt AUTOTEST\_WARN}$(string)$} simply prints a warning.
The autotest program will keep track of which tests elicit warnings and add
them to the list of volatile tests.

Here are some examples:
\begin{itemize}
\item[] {\tt CONTEND\_EQUALITY}(1,1) will {\it pass}
\item[] {\tt CONTEND\_EQUALITY}(1,2) will {\it fail}
\end{itemize}

\subsubsection{Running the autotests}
The result is an executable file named {\tt xautotest} which has several
options for running.
These options may be viewed with either the {\tt -h} or {\tt -u} flags (for
help/usage information).
\begin{verbatim}
    $ ./xautotest -h
    autotest options:
      -h,-u : prints this help file
      -t<n> : run specific test
      -p<n> : run specific package
      -L    : lists all autotests
      -l    : lists all packages
      -s    : stop on fail
      -v    : verbose
      -q    : quiet
\end{verbatim}
Simply running the program executes all the tests and displays the results to
the screen.
The is the default response of the target {\tt make check}.

\subsection{Benchmarks ({\tt make bench})}
\label{ch:installation:targets:benchmarks}

\subsection{Targets summary}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%             BIBLIOGRAPHY
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\cleardoublepage
%\bibliography{../IEEEtranBST/IEEEabrv,liquid}


% In LaTeX, each appendix is a "chapter"
\appendix
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%             APPENDIX A
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}

